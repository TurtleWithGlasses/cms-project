---
# Grafana datasource provisioning — Loki
# Grafana automatically configures this datasource on startup.

apiVersion: 1

datasources:
  - name: Loki
    type: loki
    uid: loki
    url: http://loki:3100
    access: proxy
    isDefault: false
    editable: false
    jsonData:
      maxLines: 1000
      derivedFields:
        # Link Loki request_id → Tempo/Jaeger trace (optional)
        - name: TraceID
          matcherRegex: '"request_id":"([^"]+)"'
          url: ""   # Set to Tempo/Jaeger URL when tracing backend is configured
